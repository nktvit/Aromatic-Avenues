import{g as r,u as i}from"./bootstrap.esm-yGNsrkS6.js";function d(n,t){let e=JSON.parse(localStorage.getItem("cart"))||[];const o=e.findIndex(s=>s.productId===n);o>-1?e[o].quantity+=t:e.push({productId:n,quantity:t}),localStorage.setItem("cart",JSON.stringify(e))}document.addEventListener("DOMContentLoaded",function(){f(),I(),u(),a()});function a(){const n=JSON.parse(localStorage.getItem("cart"))||[];let t=0;n.forEach(o=>{t+=o.quantity});const e=document.getElementById("cartAmount");e&&(e.textContent=`Cart (${t})`)}function u(){document.querySelectorAll(".card").forEach(t=>{t.addEventListener("click",function(e){e.target.matches(".btn-decrease, .btn-increase")?l(e):e.target.matches(".btn-add-to-cart")&&g(e)})})}function l(n){const t=n.target,e=t.closest(".input-group").querySelector(".form-control"),o=t.classList.contains("btn-increase")?1:-1;m(e,o)}function g(n){const t=n.target,e=t.closest(".card-body").querySelector(".form-control"),o=c(e.value),s=t.closest(".card").dataset.productId;d(s,o),a()}function m(n,t){const e=c(n.value),o=Math.max(1,e+t);n.value=o}function c(n){const t=parseInt(n);return isNaN(t)?1:t}function f(){const n=JSON.parse(sessionStorage.getItem("loggedInUser")),t=document.getElementById("loginLink"),e=document.getElementById("profileLink"),o=document.getElementById("logoutLink");n?(t.classList.add("d-none"),e.classList.remove("d-none"),o.classList.remove("d-none")):(t.classList.remove("d-none"),e.classList.add("d-none"),o.classList.add("d-none"))}function I(){const n=document.getElementById("logoutLink");n&&n.addEventListener("click",p);const t=document.getElementById("loginForm");t&&t.addEventListener("submit",L)}function p(){sessionStorage.removeItem("loggedInUser"),window.location.href="auth.html"}function L(n){n.preventDefault();const t=document.getElementById("inputEmail").value,e=document.getElementById("inputPassword").value;let o=r(t,e);o&&(o.isLoggedIn=!0,i(o),sessionStorage.setItem("loggedInUser",JSON.stringify(o)),console.log("Login successful!"),window.location.href="index.html")}
